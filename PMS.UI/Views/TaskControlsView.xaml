<UserControl x:Class="PMS.UI.Views.TaskControlsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:PMS.UI.Converters">
    <UserControl.Resources>
        <local:StringNotEmptyToVisibilityConverter x:Key="NonEmptyToVisibility"/>
    </UserControl.Resources>

    <Grid Margin="5">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <Button Grid.Column="0"
                Content="Add task +"
                Command="{Binding TaskList.AddTaskCommand}"
                Width="auto"
                HorizontalAlignment="Left"
                Style="{StaticResource IconButtonStyle}"/>

        <TextBox Grid.Column="1"
                 x:Name="SearchBox"
                 Margin="7,0,0,0"
                 Width="200" Height="25"
                 Padding="4,0,0,0"
                 Text="{Binding TaskList.SearchText, UpdateSourceTrigger=PropertyChanged}"
                 Tag="Search..."
                 Style="{StaticResource WatermarkTextBoxStyle}"/>

        <Button Grid.Column="2"
                Command="{Binding TaskList.ClearSearchCommand}"
                Visibility="{Binding Text, ElementName=SearchBox, Converter={StaticResource NonEmptyToVisibility}}"
                Content="X"
                Foreground="White"
                FontWeight="Bold"
                Width="25"
                Padding="0"
                BorderThickness="0"
                HorizontalAlignment="Left"
                VerticalAlignment="Center"
                Margin="2,0,0,0"
                Style="{StaticResource IconButtonStyle}"/>

        <TextBlock Grid.Column="3"
                   Text="Sort:"
                   VerticalAlignment="Center"
                   Margin="0,0,5,0"/>

        <ComboBox Grid.Column="4"
                  Width="90"
                  ItemsSource="{Binding TaskList.SortOptions}"
                  SelectedItem="{Binding TaskList.SelectedSortOption, Mode=TwoWay}"
                  HorizontalAlignment="Right"/>
    </Grid>
</UserControl>